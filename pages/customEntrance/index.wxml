<!-- index.wxml -->
<view class="container">
    <!-- 页面标题 -->
    <view class="pageTitle">{{pageTitle}}</view>
    <!-- 搜索栏目 -->
    <view class="searchColumn">
        <view class="richScan" bindtap="richScan">
            <image src="../../resource/images/customEntrance/richScan3.png"></image>
            <view>扫一扫</view>
        </view>
        <view class="search" bindtap="searchPage">
            <image src="../../resource/images/customEntrance/search3.png"></image>
            <input placeholder="搜索更多商家，免二维码，在线预约" />
        </view>
        <view class="store" bindtap="storePage">
            <image src="../../resource/images/customEntrance/store3.png"></image>
            <view>店家</view>
        </view>
    </view>
    <!-- 我的预约热榜 -->
    <view class="appointmentHotlist">
        <view class="contentTitle">
            <image src="../../resource/images/customEntrance/titleBackground3.png"></image>
            <view class="titleBox">
                <view class="cTitle">{{hotlistTitle.c}}</view>
                <view class="eTitle">{{hotlistTitle.e}}</view>
            </view>
        </view>
        <view class="box" bindtap="customEntrance">
            <block wx:if="{{hostListData.length < 4}}">
                <view class="row">
                    <block wx:for="{{[0,1,2,3]}}" wx:key='*this'>
                        <view class='item' data-id="{{hostListData[item].sid}}" bindtap="frequentedStore">
                            <image src='{{hostListData[item].logo == "" || hostListData[item].logo == null ? "":apiPrefix}}{{hostListData[item].logo == "" || hostListData[item].logo == null ? "../../resource/images/common/logo.png" :  hostListData[item].logo }}'></image>
                            <view>{{hostListData[item].name}}</view>
                            <block wx:if="{{item == 0}}">
                                <image class="gold icon" src="../../resource/images/customEntrance/gold3.png"></image>
                            </block>
                            <block wx:elif="{{item == 1}}">
                                <image class="richScan icon" src="../../resource/images/customEntrance/silver3.png"></image>
                            </block>
                            <block wx:elif="{{item == 2}}">
                                <image class="copper icon" src="../../resource/images/customEntrance/copper3.png"></image>
                            </block>
                        </view>
                    </block>
                </view>
            </block>
            <block wx:else>
                <view class="row">
                    <block wx:for="{{[0,1,2,3]}}" wx:key='*this'>
                        <view class='item' data-id="{{hostListData[item].sid}}" bindtap="frequentedStore">
                            <image src='{{hostListData[item].logo == "" || hostListData[item].logo == null ? "":apiPrefix}}{{hostListData[item].logo == "" || hostListData[item].logo == null ? "../../resource/images/common/logo.png" :  hostListData[item].logo }}'></image>
                            <view>{{hostListData[item].name}}</view>
                            <block wx:if="{{item == 0}}">
                                <image class="gold icon" src="../../resource/images/customEntrance/gold3.png"></image>
                            </block>
                            <block wx:elif="{{item == 1}}">
                                <image class="richScan icon" src="../../resource/images/customEntrance/silver3.png"></image>
                            </block>
                            <block wx:elif="{{item == 2}}">
                                <image class="copper icon" src="../../resource/images/customEntrance/copper3.png"></image>
                            </block>
                        </view>
                    </block>
                </view>
                <view class="row">
                    <block wx:for="{{[4,5,6,7]}}" wx:key='*this'>
                        <block wx:if="{{item < 7}}">
                            <view class='item' data-id="{{hostListData[item].sid}}" bindtap="frequentedStore">
                                <image src='{{hostListData[item].logo == "" || hostListData[item].logo == null ? "":apiPrefix}}{{hostListData[item].logo == "" || hostListData[item].logo == null ? "../../resource/images/common/logo.png" :  hostListData[item].logo }}'></image>
                                <view>{{hostListData[item].name}}</view>
                            </view>
                        </block>
                        <block wx:if="{{item == 7 && hostListData.length > 7}}">
                            <view class='item' bindtap="showModalFn">
                                <image src="../../resource/images/customEntrance/moreList3.png"></image>
                                <view>查看更多</view>
                            </view>
                        </block>
                    </block>
                </view>
            </block>
        </view>
    </view>
    <!-- 我的预约日记 -->
    <view class="appointmentDiary">
        <view class="contentTitle">
            <image src="../../resource/images/customEntrance/titleBackground3.png"></image>
            <view class="titleBox">
                <view class="cTitle">{{diaryTitle.c}}</view>
                <view class="eTitle">{{diaryTitle.e}}</view>
            </view>
        </view>
        <!-- tab -->
        <view class="tabList">
            <view class="tab {{tabState == 'doing' ? 'active' : ''}}" bindtap="selectDoing" data-id="doing">
                进行中
            </view>
            <view class="tab {{tabState == 'done' ? 'active' : ''}}" bindtap="selectDone" data-id="done">
                已完成
            </view>
        </view>
        <view class="tabBox">
            <view class="tabContentList">
                <block wx:if="{{tabContentShow}}">
                    <view class="tabContent">
                        <block wx:if="{{completingSeqData}}">
                            <block wx:for="{{completingSeqData}}" wx:key='*this'>
                                <view class="card">
                                    <view class="title">
                                        {{completingTitleData[index].rq}}{{completingTitleData[index].bd}}
                                    </view>
                                    <block wx:for="{{completingSeqData[index]}}" wx:key='*this'>
                                        <view class="item" bindtap="compeletingModalShow">
                                            <view class="header">
                                                <block wx:if="{{completingData[index].type == 0}}">
                                                    <view class="tag" style="background-color: rgb(243,67,67);">
                                                        预约
                                                    </view>
                                                </block>
                                                <block wx:elif="{{completingData[index].type == 1}}">
                                                    <view class="tag" style="background-color: rgb(253,172,110);">
                                                        被约
                                                    </view>
                                                </block>
                                                <block wx:else>
                                                    <view class="tag" style="background-color: rgb(148,181,254);">
                                                        私人
                                                    </view>
                                                </block>
                                                <view class="project">
                                                    {{completingData[index].serviceitem}}
                                                </view>
                                                <!-- <view class="clash">
                                                <image src="../../resource/images/customEntrance/clash3.png" />
                                            </view> -->
                                                <view class="time">
                                                    <block wx:if="{{completingData[index].type == 0}}">
                                                        <image src="../../resource/images/customEntrance/dollar3.png"></image>
                                                    </block>
                                                    {{completingTime[index]}}
                                                </view>
                                            </view>
                                            <view class="clause">
                                                <view class="name">服务项目：</view>
                                                <view class="definite">
                                                    {{completingData[index].serviceitem}}
                                                </view>
                                            </view>
                                            <view class="clause">
                                                <view class="name">服务人员：</view>
                                                <view class="definite">
                                                    {{completingData[index].empolyee}}
                                                </view>
                                            </view>
                                            <view class="clause">
                                                <view class="name">商家电话：</view>
                                                <view class="definite">
                                                    {{completingData[index].sLoginname}}
                                                </view>
                                            </view>
                                            <view class="footer">
                                                <view class="cancel">取消</view>
                                                <view class="share">分享</view>
                                            </view>
                                        </view>
                                    </block>
                                </view>
                            </block>
                        </block>
                    </view>
                </block>
                <block wx:else>
                    <view class="tabContent">
                        <block wx:if="{{completedData}}">
                            <view class="fold">
                                <view class="header">
                                    <view class="time">2018-09</view>
                                    <view class="trigger" bindtap="foldSwitch">
                                        <image src="{{st ? '../../resource/images/common/icon-t3.png' : '../../resource/images/common/icon-b3.png'}}" />
                                    </view>
                                </view>
                                <view class="box" style="height:{{st ? 0 : 'auto'}}">
                                    <view class="item" bindtap="compeletedModalShow">
                                        <view class="logo">
                                            <image src="../../resource/images/customEntrance/01.png"></image>
                                        </view>
                                        <view class="details">
                                            <view class="">翻滚法医</view>
                                            <view class="">服务项目：美发</view>
                                        </view>
                                        <view class="time">
                                            <view class="">10:00-11:00</view>
                                            <view class="">08-30</view>
                                        </view>
                                        <view class="state"></view>
                                    </view>
                                    <view class="item" bindtap="compeletedModalShow">
                                        <view class="logo">
                                            <image src="../../resource/images/customEntrance/01.png"></image>
                                        </view>
                                        <view class="details">
                                            <view class="">翻滚法医</view>
                                            <view class="">服务项目：美发</view>
                                        </view>
                                        <view class="time">
                                            <view class="">10:00-11:00</view>
                                            <view class="">08-30</view>
                                        </view>
                                        <view class="state"></view>
                                    </view>
                                </view>
                            </view>
                        </block>
                        <block wx:else>
                            <image src="../../resource/images/customEntrance/completed3.png" />
                        </block>
                    </view>
                </block>
            </view>
        </view>
    </view>
    <!-- 底部导航栏 -->
    <view class="tabtar-box">
        <view class="tabtar-item {{tabbarActive ? 'active' : ''}}">
            <image src="{{tabbarActive ? '../../resource/images/common/appoint3a.png' : '../../resource/images/common/appoint3.png'}}" />
            <view>预约</view>
        </view>
        <view class="tabtar-item active" bindtap="appointmentVoice">
            <image src="../../resource/images/common/add3.png" />
            <view>添加</view>
        </view>
        <view class="tabtar-item" bindtap="minePage">
            <image src="../../resource/images/common/mine3.png" />
            <view>我的</view>
        </view>
    </view>
    <!-- 弹出层 -->
    <block wx:if="{{showModal}}">
        <view class="mask" catchtouchmove="preventTouchMove"></view>
        <view class="modalDlg">
            <view class="fold">
                <view class="box">
                    <view class="title">您经常访问的店家：</view>
                    <block wx:for="{{hostListData}}" wx:key='*this'>
                        <block wx:if="{{index > 6}}">
                            <view class="item" data-id="{{hostListData[index].sid}}" bindtap="frequentedStore">
                                <view class="logo">
                                    <image src='{{hostListData[index].logo == "" || hostListData[index].logo == null ? "":apiPrefix}}{{hostListData[index].logo == "" || hostListData[index].logo == null ? "../../resource/images/common/logo.png" :  hostListData[index].logo }}'></image>
                                </view>
                                <view class="details">
                                    <view>{{item.name}}</view>
                                    <view>{{item.pca}}{{item.address}}</view>
                                </view>
                                <view class="time">
                                    <view></view>
                                    <view></view>
                                </view>
                                <view class="state">
                                    <image src="../../resource/images/common/delete3.png" />
                                </view>
                            </view>
                        </block>
                    </block>
                </view>
            </view>
            <button class="cancel" bindtap="modalClose">关闭</button>
        </view>
    </block>
    <!-- 正在进行弹出层 -->
    <block wx:if="{{compeletingModal}}">
        <view class="mask" catchtouchmove="preventTouchMove"></view>
        <view class="compeletingModal">
            <view class="title">预约详情</view>
            <view class="logo">
                <image src="../../resource/images/customEntrance/01.png" />
                <view>新大地发艺</view>
                <view class="state">进行中</view>
            </view>
            <view class="item">
                <view class="">服务项目：</view>
                <view class="">美发</view>
            </view>
            <view class="item">
                <view class="">服务人员：</view>
                <view class="">ANDY</view>
            </view>
            <view class="item">
                <view class="">商家地址：</view>
                <view class="">天堂路地狱门</view>
            </view>
            <view class="item">
                <view class="">服务时间：</view>
                <view class="detailTime">
                    <view class="">2017-08-10</view>
                    <view class="">14:00-14:30</view>
                </view>
            </view>
            <view class="item">
                <view class="">商家电话：</view>
                <view class="">18621306666</view>
            </view>
            <view class="item">
                <view class="">已付定金：</view>
                <view class="payed">0.02元</view>
            </view>
            <view class="eventBox">
                <view class="cancel">取消预约</view>
                <view class="close" bindtap="compeletingModalClose">关闭</view>
            </view>
        </view>
    </block>
    <!-- 已完成弹出层 -->
    <block wx:if="{{compeletedModal}}">
        <view class="mask" catchtouchmove="preventTouchMove"></view>
        <view class="compeletingModal">
            <view class="title">已完成详情</view>
            <view class="logo">
                <image src="../../resource/images/customEntrance/01.png" />
                <view>新大地发艺</view>
            </view>
            <view class="item">
                <view>服务项目：</view>
                <view>美发</view>
            </view>
            <view class="item">
                <view>服务人员：</view>
                <view>ANDY</view>
            </view>
            <view class="item">
                <view>商家电话：</view>
                <view>18621306666</view>
            </view>
            <view class="item">
                <view>商家地址：</view>
                <view>天堂路地狱门</view>
            </view>
            <view class="item">
                <view class="">服务时间：</view>
                <view class="detailTime">
                    <view>2017-08-10</view>
                    <view>14:00-14:30</view>
                </view>
            </view>
            <view class="eventBox">
                <view class="cancel" bindtap="compeletedModalClose">关闭</view>
                <view class="close" bindtap="appointmentAgain">再次预约</view>
            </view>
        </view>
    </block>
</view>